name: Mirror to GitLab

on:
  push:
    branches:
      - main  # আপনার মেইন ব্রাঞ্চের নাম master হলে সেটি দিন

jobs:
  git-mirror:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Mirror to GitLab
        run: |
          # ১. গিট সিকিউরিটি এরর ফিক্স করা
          git config --global --add safe.directory /github/workspace
          
          # ২. গিটল্যাব রিমোট অ্যাড করা (টোকেন সহ)
          # এখানে Keshab1997 আপনার ইউজারনেম এবং সিক্রেট থেকে টোকেন নেওয়া হচ্ছে
          git remote add gitlab https://Keshab1997:${{ secrets.GITLAB_TOKEN }}@gitlab.com/keshab1997-group/Study-With-Keshab.git
          
          # ৩. গিটল্যাবে পুশ করা (সব ব্রাঞ্চ এবং ট্যাগ সহ)
          git push --force --prune gitlab "+refs/heads/*:refs/heads/*" "+refs/tags/*:refs/tags/*"