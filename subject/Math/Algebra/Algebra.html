<!doctype html>
<html lang="bn">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Algebra (বীজগণিত) | Study With Keshab</title>

        <link rel="stylesheet" href="css/style.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

        <style>
            body.auth-loading {
                visibility: hidden;
                opacity: 0;
            }
            
            /* Table Styles */
            .styled-table {
                width: 100%;
                border-collapse: collapse;
                margin: 25px 0;
                font-size: 0.9em;
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            }
            .styled-table thead tr {
                background-color: #009879;
                color: #ffffff;
                text-align: left;
            }
            .styled-table th, .styled-table td {
                padding: 12px 15px;
            }
            .styled-table tbody tr {
                border-bottom: 1px solid #dddddd;
            }

            /* --- PDF MODAL STYLES (NEW) --- */
            .pdf-btn {
                display: block;
                width: 100%;
                padding: 12px;
                margin-bottom: 10px;
                background: #f8f9fa;
                border: 1px solid #ddd;
                border-radius: 8px;
                text-align: left;
                cursor: pointer;
                transition: all 0.3s ease;
                color: #333;
                font-size: 16px;
                text-decoration: none;
            }
            .pdf-btn:hover {
                background: #009879;
                color: white;
                padding-left: 20px;
            }
            
            /* The Modal (background) */
            .modal {
                display: none; 
                position: fixed; 
                z-index: 9999; 
                left: 0;
                top: 0;
                width: 100%; 
                height: 100%; 
                overflow: hidden; 
                background-color: rgba(0,0,0,0.8); 
                backdrop-filter: blur(5px);
            }

            /* Modal Content */
            .modal-content {
                position: relative;
                background-color: #fefefe;
                margin: 2% auto; 
                padding: 0;
                border: 1px solid #888;
                width: 95%;
                height: 90%;
                border-radius: 10px;
                display: flex;
                flex-direction: column;
            }

            /* Close Button */
            .close-modal {
                color: white;
                position: absolute;
                top: 10px;
                right: 25px;
                font-size: 35px;
                font-weight: bold;
                cursor: pointer;
                z-index: 10001;
            }
            .close-modal:hover {
                color: #f1f1f1;
            }

            /* Iframe Style */
            #pdf-frame {
                width: 100%;
                height: 100%;
                border: none;
                border-radius: 0 0 10px 10px;
            }
            .modal-header {
                padding: 10px;
                background: #009879;
                color: white;
                border-radius: 10px 10px 0 0;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
        </style>
    </head>
    <body class="day-mode homepage theme-blue auth-loading">
        <div id="preloader">
            <div class="loader"></div>
        </div>

        <header class="main-header">
            <img src="images/logo.jpg" alt="লোগো" class="profile-pic" id="logo-easter-egg" />
            <div class="header-text">
                <h1>অধ্যায়: বীজগণিত (Algebra)</h1>
                <p>আপনার পড়াশোনার সেরা ডিজিটাল সঙ্গী</p>
            </div>
            <button id="dark-mode-toggle" class="dark-mode-button">
                <i class="fa-solid fa-moon"></i>
            </button>
        </header>

        <nav class="nav-grid">
            <a href="../../../../index.html" class="nav-button color-home"><i class="fa-solid fa-house"></i><span>হোম</span></a>
            <a href="#dashboard" class="nav-button color-dashboard"><i class="fa-solid fa-chart-line"></i><span>ড্যাশবোর্ড</span></a>
            <a href="#class-notes" class="nav-button color-notes"><i class="fa-solid fa-book-open"></i><span>ক্লাস নোট</span></a>
            <a href="#pdf-notes" class="nav-button color-pdf"><i class="fa-solid fa-file-pdf"></i><span>পিডিএফ নোট</span></a>
            <a href="#quiz-sets" class="nav-button color-quiz"><i class="fa-solid fa-file-circle-question"></i><span>কুইজ সেট</span></a>
            <a href="#leaderboard" class="nav-button color-leaderboard"><i class="fa-solid fa-trophy"></i><span>লিডারবোর্ড</span></a>
        </nav>

        <main>
            <!-- Profile Section -->
            <section class="card" id="user-profile-card">
                <div class="profile-header">
                    <img id="user-profile-pic" src="images/default-avatar.png" class="profile-pic-large" />
                    <div class="profile-info">
                        <h2 id="user-display-name">লোড হচ্ছে...</h2>
                        <p id="user-email">লোড হচ্ছে...</p>
                    </div>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section class="card" id="dashboard">
                <h2><i class="fa-solid fa-chart-line icon-title"></i> আমার ড্যাশবোর্ড</h2>
                <div style="padding: 20px; text-align: center;">
                    <canvas id="progressChart" width="400" height="200"></canvas>
                </div>
            </section>

            <!-- PDF Notes Section (UPDATED) -->
            <section class="card" id="pdf-notes">
                <h2><i class="fa-solid fa-file-pdf icon-title"></i> পিডিএফ নোট</h2>
                <p>পিডিএফ পড়তে নিচের বাটনে ক্লিক করুন:</p>
                
                <div class="link-container">
                    <!-- Buttons calling JS function with File ID -->
                    <button class="pdf-btn" onclick="openPdf('1DrJwuYxGa2KMtavY2AoYEC8upqepCbQ_', 'Class 01 Note')"><i class="fa-solid fa-file-pdf"></i> Class 01 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1ENgGdF4bASjRPrsRY_7afLHv4TjR36EV', 'Class 02 Note')"><i class="fa-solid fa-file-pdf"></i> Class 02 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1E0BwPQvOUKGRA7ey2kI9jhF-_QOovPpN', 'Class 03 Note')"><i class="fa-solid fa-file-pdf"></i> Class 03 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1EkSduQlX8ArAjuqSe24BoG8SoYmidCZT', 'Class 04 Note')"><i class="fa-solid fa-file-pdf"></i> Class 04 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1EdO69C-oD3zmS9cMSfw_lcUU_JCPSBVR', 'Class 05 Note')"><i class="fa-solid fa-file-pdf"></i> Class 05 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1E_DUmtM5akVE3YdxhEwfXm0OJ73y-l_g', 'Class 06 Note')"><i class="fa-solid fa-file-pdf"></i> Class 06 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1E_AU-1aQ3RrDh36PqrC1BXCIjaGxhHMu', 'Class 07 Note')"><i class="fa-solid fa-file-pdf"></i> Class 07 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1EZupU0EDonGCiGHRffVYl56NeCEY_0iw', 'Class 08 Note')"><i class="fa-solid fa-file-pdf"></i> Class 08 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1ES0HZQk1o3LMjed-192smEAtvxUY8Yx6', 'Class 09 Note')"><i class="fa-solid fa-file-pdf"></i> Class 09 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1EQ6rH5Wx1iDV2-TSRmWNGJCzFbqcQ6H0', 'Class 10 Note')"><i class="fa-solid fa-file-pdf"></i> Class 10 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1ELs3g03I1xRK-DSvrh0w3JrN0HCNKuOQ', 'Class 11 Note')"><i class="fa-solid fa-file-pdf"></i> Class 11 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1EKNkwW-gwpr60NLnRohwduoKyzw3OfLX', 'Class 12 Note')"><i class="fa-solid fa-file-pdf"></i> Class 12 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1EKDQdJ6B28zgWkAgPYto1FL4foMgZrgH', 'Class 13 Note')"><i class="fa-solid fa-file-pdf"></i> Class 13 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1EHi9KWTRpG8-ZLFpl9PCxgRYfVnlz5sT', 'Class 14 Note')"><i class="fa-solid fa-file-pdf"></i> Class 14 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1EEe7PNo6rzTlQYJxwEoegMPPoGnI8K1R', 'Class 15 Note')"><i class="fa-solid fa-file-pdf"></i> Class 15 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1E10eiL6oQ6NXeDaXzE5CAPBjJUWGi9j6', 'Class 16 Note')"><i class="fa-solid fa-file-pdf"></i> Class 16 Note</button>
                    <button class="pdf-btn" onclick="openPdf('1E0uiCMCqTEskfNO7sjepGsrGQsKUF_Xf', 'All Question Sheet')"><i class="fa-solid fa-file-pdf"></i> All Question Sheet</button>
                </div>
            </section>

            <!-- Leaderboard Section -->
            <section class="card" id="leaderboard">
                <h2><i class="fa-solid fa-trophy icon-title"></i> লিডারবোর্ড</h2>
                <table class="styled-table">
                    <thead>
                        <tr><th>Rank</th><th>Name</th><th>Score</th></tr>
                    </thead>
                    <tbody id="leaderboard-body">
                        <tr><td colspan="3" style="text-align:center;">ডেটা লোড হচ্ছে...</td></tr>
                    </tbody>
                </table>
            </section>

        </main>

        <!-- PDF VIEWER MODAL (HIDDEN BY DEFAULT) -->
        <div id="pdfModal" class="modal">
            <span class="close-modal" onclick="closePdf()">&times;</span>
            <div class="modal-content">
                <div class="modal-header">
                    <span id="pdf-title">PDF View</span>
                </div>
                <!-- Google Drive Embed URL format -->
                <iframe id="pdf-frame" src="" allow="autoplay"></iframe>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 কেশব সরকার। সর্বস্বত্ব সংরক্ষিত।</p>
        </footer>

        <!-- Scripts -->
        <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
        <script src="js/firebase-config.js"></script>
        <script type="module" src="js/script.js"></script>

        <!-- Custom Script for PDF Modal -->
        <script>
            // Auth Loading Handler
            if (typeof firebase !== 'undefined') {
                firebase.auth().onAuthStateChanged((user) => {
                    if (!user) {
                        window.location.href = "https://keshab1997.github.io/Study-With-Keshab/login.html";
                    } else {
                        document.body.classList.remove("auth-loading");
                    }
                });
            }

            // Function to Open PDF
            function openPdf(fileId, title) {
                const modal = document.getElementById("pdfModal");
                const frame = document.getElementById("pdf-frame");
                const titleSpan = document.getElementById("pdf-title");

                // Google Drive Preview URL Format
                const url = `https://drive.google.com/file/d/${fileId}/preview`;
                
                frame.src = url;
                titleSpan.innerText = title;
                modal.style.display = "block";
                
                // Disable scrolling on body
                document.body.style.overflow = "hidden";
            }

            // Function to Close PDF
            function closePdf() {
                const modal = document.getElementById("pdfModal");
                const frame = document.getElementById("pdf-frame");
                
                modal.style.display = "none";
                frame.src = ""; // Clear source to stop loading
                
                // Enable scrolling on body
                document.body.style.overflow = "auto";
            }

            // Close modal if clicked outside
            window.onclick = function(event) {
                const modal = document.getElementById("pdfModal");
                if (event.target == modal) {
                    closePdf();
                }
            }
        </script>
    </body>
</html>