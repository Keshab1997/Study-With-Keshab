<!doctype html>
<html lang="bn">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
      id="viewportMeta"
    />
    <title>স্নায়ুতন্ত্র (Nervous System) | Study With Keshab</title>

    <!-- === প্রধান সাইটের CSS ফাইল (সঠিক পাথ সহ) === -->
    <link rel="stylesheet" href="../../../css/style.css" />
    <link rel="stylesheet" href="../../../css/notification.css" />

    <!-- === অধ্যায়ের নিজস্ব স্টাইলশিট === -->
    <link rel="stylesheet" href="css/style.css" />

    <!-- === আইকন ব্যবহারের জন্য Font Awesome CDN === -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <!-- চার্ট ব্যবহারের জন্য Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

    <!-- === পেজ লোডিং এর সময় হাইড করার জন্য স্টাইল === -->
    <style>
      body.auth-loading {
        visibility: hidden;
        opacity: 0;
      }

      .chapter-title-bar {
        background-color: #f4f7f6;
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid #e0e0e0;
        margin-top: 70px; /* Fixed header এর জন্য জায়গা ছাড়া */
      }
      .chapter-title-bar h1 {
        margin: 0;
        font-size: 1.8rem;
        color: #2c3e50;
      }
      body.dark-mode .chapter-title-bar {
        background-color: #1f2b38;
        border-bottom-color: #34495e;
      }
      body.dark-mode .chapter-title-bar h1 {
        color: #ecf0f1;
      }
      main {
        padding-top: 1rem;
      }
    </style>
  </head>
  <body class="day-mode homepage theme-blue auth-loading">
    <div id="preloader">
      <div class="loader"></div>
    </div>

    <!-- === নতুন হেডার এবং মোবাইল মেনু === -->
    <header class="site-header">
      <div class="header-grid">
        <a href="../../../index.html" class="logo-link">
          <img
            src="../../../images/logo.jpg"
            alt="Study With Keshab Logo"
            class="logo-img"
          />
        </a>
        <nav class="primary-navigation">
          <ul>
            <li>
              <a href="../../../index.html" class="home"
                ><i class="fas fa-home"></i> Home</a
              >
            </li>
            <li>
              <a href="../../../index.html#subjects" class="services"
                ><i class="fas fa-book-open"></i> Subjects</a
              >
            </li>
            <li>
              <a href="../../../about.html" class="about"
                ><i class="fas fa-info-circle"></i> About</a
              >
            </li>
            <li>
              <a href="../../../contact.html" class="contact"
                ><i class="fas fa-envelope"></i> Contact</a
              >
            </li>
            <li>
              <a href="../../../index.html#feedback-module" class="feedback"
                ><i class="fas fa-comment-alt"></i> Feedback</a
              >
            </li>
            <li class="auth-link" id="guest-link-desktop">
              <a href="../../../login.html" class="login"
                ><i class="fas fa-sign-in-alt"></i> Login / Sign Up</a
              >
            </li>
            <li class="auth-link" id="admin-link-desktop" style="display: none">
              <a href="../../../admin.html"
                ><i class="fas fa-user-shield"></i> Admin Panel</a
              >
            </li>
            <li
              class="auth-link"
              id="logout-link-desktop"
              style="display: none"
            >
              <a href="#" id="logout-btn-desktop"
                ><i class="fas fa-sign-out-alt"></i> Log out</a
              >
            </li>
          </ul>
        </nav>
        <div class="header-actions">
          <div
            id="user-info-cluster"
            class="user-info-cluster"
            style="display: none"
          >
            <span id="user-name-display" class="nav-user-name"></span>
            <button
              id="show-notification-btn"
              title="নোটিফিকেশন"
              class="notification-bell-btn"
            >
              <i class="fa-solid fa-bell"></i>
              <span id="notification-badge"></span>
            </button>
            <button
              class="toggle-view-btn header-action-btn"
              title="ডেস্কটপ মোড"
            >
              <i class="fas fa-desktop"></i>
            </button>
          </div>
          <button
            class="mobile-nav-toggle"
            aria-controls="mobile-navigation-menu"
            aria-expanded="false"
          >
            <span class="sr-only">Menu</span>
          </button>
        </div>
      </div>
    </header>

    <nav
      id="mobile-navigation-menu"
      class="mobile-navigation-menu"
      data-visible="false"
    >
      <ul>
        <li>
          <a href="../../../index.html"><i class="fas fa-home"></i> Home</a>
        </li>
        <li>
          <a href="../../../index.html#subjects"
            ><i class="fas fa-book-open"></i> Subjects</a
          >
        </li>
        <li>
          <a href="../../../about.html"
            ><i class="fas fa-info-circle"></i> About</a
          >
        </li>
        <li>
          <a href="../../../contact.html"
            ><i class="fas fa-envelope"></i> Contact</a
          >
        </li>
        <li>
          <a href="../../../index.html#feedback-module"
            ><i class="fas fa-comment-alt"></i> Feedback</a
          >
        </li>
        <li class="auth-link" id="guest-link-mobile">
          <a href="../../../login.html"
            ><i class="fas fa-sign-in-alt"></i> Login / Sign Up</a
          >
        </li>
        <li class="auth-link" id="admin-link-mobile" style="display: none">
          <a href="../../../admin.html"
            ><i class="fas fa-user-shield"></i> Admin Panel</a
          >
        </li>
        <li class="auth-link" id="logout-link-mobile" style="display: none">
          <a href="#" id="logout-btn-mobile"
            ><i class="fas fa-sign-out-alt"></i> Log out</a
          >
        </li>
        <li>
          <a href="#" class="toggle-view-btn"
            ><i class="fas fa-desktop"></i
            ><span class="toggle-view-text">ডেস্কটপ মোড</span></a
          >
        </li>
      </ul>
    </nav>

    <div class="chapter-title-bar">
      <h1>অধ্যায়: স্নায়ুতন্ত্র (Nervous System)</h1>
    </div>

    <main>
      <script>
        const CURRENT_CHAPTER_NAME = "Biology স্নায়ুতন্ত্র (Nervous System)";
      </script>

      <section class="card" id="user-profile-card">
        <div class="profile-header">
          <img
            id="user-profile-pic"
            src="images/default-avatar.png"
            alt="Profile Picture"
            class="profile-pic-large"
          />
          <div class="profile-info">
            <h2 id="user-display-name">লোড হচ্ছে...</h2>
            <p id="user-email">লোড হচ্ছে...</p>
          </div>
        </div>
      </section>

      <!-- বাকি সেকশনগুলো অপরিবর্তিত থাকবে -->
      <!-- Dashboard, PDF Notes, Class Notes, etc. -->
      <section class="card" id="dashboard">
        <h2>
          <i class="fa-solid fa-chart-line icon-title"></i> আমার ড্যাশবোর্ড
        </h2>
        <div class="dashboard-grid">
          <div class="dashboard-item">
            <h3>অধ্যায়ের অগ্রগতি (কুইজ)</h3>
            <div class="progress-bar-container">
              <div
                class="progress-bar"
                id="chapter-progress-bar"
                style="width: 0%"
              ></div>
            </div>
            <p id="chapter-progress-text">0% সম্পন্ন</p>
          </div>
          <div class="dashboard-item">
            <h3>সামগ্রিক পারফরম্যান্স</h3>
            <canvas id="quiz-pie-chart"></canvas>
          </div>
          <div class="dashboard-item">
            <h3>দৈনিক চ্যালেঞ্জ</h3>
            <div id="daily-challenge" class="challenge-box">
              <p id="challenge-text">আজকের চ্যালেঞ্জ লোড হচ্ছে...</p>
            </div>
          </div>
          <div class="dashboard-item">
            <h3>আমার অ্যাচিভমেন্টস</h3>
            <div
              class="achievements-container"
              id="achievements-container"
            ></div>
          </div>
        </div>
      </section>

      <!-- অন্যান্য সেকশন... -->
    </main>

    <button id="scrollTopBtn" title="Top">⬆</button>

    <footer>
      <div class="footer-bottom">
        &copy; 2025 | Study With Keshab | সর্বস্বত্ব সংরক্ষিত
      </div>
    </footer>

    <div id="notification-modal">
      <button id="close-notification-modal"><i class="fa fa-times"></i></button>
      <h3>নোটিফিকেশন</h3>
      <ul id="notification-list"></ul>
      <div class="notification-modal-footer">
        <button
          id="clear-read-notifications-btn"
          class="btn-notification-action btn-clear"
        >
          <i class="fa-solid fa-check-double"></i> পঠিত সব মুছুন
        </button>
        <button
          id="close-notification-btn-footer"
          class="btn-notification-action btn-close"
        >
          বন্ধ করুন
        </button>
      </div>
    </div>

    <!-- === Firebase এবং স্ক্রিপ্ট সেকশন (সঠিক পাথ সহ) === -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <!-- *** গুরুত্বপূর্ণ পরিবর্তন এখানে *** -->
    <!-- এখন এটি অধ্যায়ের নিজস্ব ফোল্ডার থেকে config ফাইল লোড করবে -->
    <script src="js/firebase-config.js"></script>

    <!-- প্রধান সাইটের স্ক্রিপ্ট ফাইল -->
    <script src="../../../auth.js"></script>
    <script src="../../../js/notification-data.js"></script>
    <script src="../../../js/notification.js"></script>
    <script src="../../../js/script.js"></script>

    <!-- অন্যান্য লাইব্রেরি -->
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/countup.js@2.0.7/dist/countUp.min.js"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- অধ্যায়ের নিজস্ব জাভাস্ক্রিপ্ট ফাইল -->
    <script type="module" src="js/script.js"></script>

    <!-- ডেস্কটপ/মোবাইল মোড টগল করার স্ক্রিপ্ট -->
    <script>
      const toggleBtns = document.querySelectorAll(".toggle-view-btn");
      const viewportMeta = document.getElementById("viewportMeta");
      let isDesktopView = localStorage.getItem("viewMode") === "desktop";
      function applyViewMode() {
        const desktopBtn = document.querySelector(
          ".header-action-btn.toggle-view-btn",
        );
        const mobileMenuText = document.querySelector(".toggle-view-text");
        const allIcons = document.querySelectorAll(".toggle-view-btn .fas");
        if (isDesktopView) {
          viewportMeta.setAttribute("content", "width=1280");
          if (desktopBtn) desktopBtn.title = "মোবাইল মোড";
          if (mobileMenuText) mobileMenuText.textContent = "মোবাইল মোড";
          allIcons.forEach((icon) => {
            icon.classList.remove("fa-desktop");
            icon.classList.add("fa-mobile-alt");
          });
        } else {
          viewportMeta.setAttribute(
            "content",
            "width=device-width, initial-scale=1.0",
          );
          if (desktopBtn) desktopBtn.title = "ডেস্কটপ মোড";
          if (mobileMenuText) mobileMenuText.textContent = "ডেস্কটপ মোড";
          allIcons.forEach((icon) => {
            icon.classList.remove("fa-mobile-alt");
            icon.classList.add("fa-desktop");
          });
        }
      }
      toggleBtns.forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          isDesktopView = !isDesktopView;
          localStorage.setItem(
            "viewMode",
            isDesktopView ? "desktop" : "mobile",
          );
          applyViewMode();
        });
      });
      applyViewMode();
    </script>
  </body>
</html>
